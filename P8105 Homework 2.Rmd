---
title: "P8105 Homework 2"
author: "Laylah Jones"
date: 2023-09-27
output: github_document
---

# Problem 1

Importing libraries

```{r}
library(tidyverse)
```


### Part 1. First we will read and clean the pols-month.csv data.

```{r}

pols_df = 
  read.csv("./fivethirtyeight_datasets/pols-month.csv") |>
  janitor::clean_names() |>
  separate(mon, c("year", "month", "day"), convert = TRUE) |>
  mutate(
    month = case_when(
      month == 1 ~ "January",
      month == 2 ~ "February",
      month == 3 ~ "March",
      month == 4 ~ "April",
      month == 5 ~ "May",
      month == 6 ~ "June",
      month == 7 ~ "July",
      month == 8 ~ "August",
      month == 9 ~ "September",
      month == 10 ~ "October",
      month == 11 ~ "November",
      month == 12 ~ "December"
    )
  ) |>
  mutate(
    president = case_when(
      prez_dem == 1 ~ "dem",
      prez_gop == 1 ~ "gop"
    )
  ) |>
  select(-prez_dem, -prez_gop, -day)
```

### Part 2. Now we will read and clean snp.csv data.
```{r}
snp_df = 
  read.csv("./fivethirtyeight_datasets/snp.csv") |>
  janitor::clean_names() |>
  separate(date, c("month", "day", "year"), convert = TRUE) |>
  mutate(
    year = as.numeric(year),
    year=ifelse(year<=20,year+2000,year+1900),
    month = case_when(
      month == 1 ~ "January",
      month == 2 ~ "February",
      month == 3 ~ "March",
      month == 4 ~ "April",
      month == 5 ~ "May",
      month == 6 ~ "June",
      month == 7 ~ "July",
      month == 8 ~ "August",
      month == 9 ~ "September",
      month == 10 ~ "October",
      month == 11 ~ "November",
      month == 12 ~ "December"
    )
  )|>
  select(-day) |>
  select(year, month, close)
```

### Part 3. Lastly we will read and clean unemployment.csv data.
```{r}
unemployment_df = 
  read.csv("./fivethirtyeight_datasets/unemployment.csv") |>
  janitor::clean_names() |>
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment rate"
  ) |>
  mutate(
    month = case_when(
      month == "jan" ~ "January",
      month == "feb" ~ "February",
      month == "mar" ~ "March",
      month == "apr" ~ "April",
      month == "may" ~ "May",
      month == "jun" ~ "June",
      month == "jul" ~ "July",
      month == "aug" ~ "August",
      month == "sep" ~ "September",
      month == "oct" ~ "October",
      month == "nov" ~ "November",
      month == "dec" ~ "December"
    )
  ) 
```

### Part 4. Merge data sets

```{r}
pols_snp_merge = 
  left_join(pols_df, snp_df, by = c("year", "month"))

merge_df = 
  left_join(pols_snp_merge, unemployment_df, by = c("year", "month"))
```

### Part 5. Dataset explaination and description

The pols_df originally contained information about the presidency and the number of national politicians who were either democrat or republican at the time from 1947 to 2015, and was structured with a variable labelled "mon" signifying the date in the format of "YYYY-MM-DD". By cleaning the data, the "mon" variable was separated into integer variables for "year", "month", and "day". The "month" variable was then mutated from a numeric variable to the corresponding month name. Additionally, a "president" variable was created using the variables "gop" for Republican presidents and "dem" for Democratic presidents, while removing the "prez_dem" and "prex_gop" variables. The resulting pols_df dataset includes dimensions of 822 observed rows by 9 columns and key variables including "year", "month", "president" and other variables related to presidency.

The snp_df originally contained information about the Standard & Poor stock market index, with columns for "year", "month", "day", and "close" values at the time from 1950 to 2015. Cleaning consisted of arranging the data by "year" and "month" to align with the other datasets. The dataset includes dimensions of 787 observed rows and 3 columns.

The unemployment_df originally contained information about the percentage of unemployment from 1948 to 2015 in a "wide" format. 




